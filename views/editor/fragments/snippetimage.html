<fieldset class="js-SnippetImage js-Dynamic">
  <legend>Image</legend>

    <div class="form-group">
        <label class="control-label">Align:</label>
        <select name="snippets[{{index}}][align]">
           {{#options}}
              <option value="{{value}}" {{#selected}} selected {{/selected}}>{{txt}}</option>
           {{/options}}
           {{^options}}
              <option value="left">left</option>
              <option value="center">center</option>
              <option value="right">right</option>
           {{/options}}
        </select>
    </div>

  <div class="form-group">
    <label class="control-label">Title</label>
    <input name="snippets[{{index}}][title]" type="text" class="form-control" value="{{title}}" placeholder="No title" />
  </div>

  <div class="form-group">
    <label>Src</label>
    <img id='snippets-{{index}}-src-preview' data-src="{{src}}" class='img-preview-thumb' />
    <input id="snippets-{{index}}-src" name="snippets[{{index}}][src]" data-for="snippets-{{index}}-src" class="form-control src-input" type="text" value="{{src}}" placeholder="No source" />
    <input data-for="snippets-{{index}}-src" class="fileupload-input" type="file" name="files[]">
  </div>

  <div class="form-group">
    <label class="control-label">Alternative Text</label>
    <textarea name="snippets[{{index}}][alt]" class="form-control">{{alt}}</textarea>
  </div>

  <div class="form-group">
    <label class="control-label">Credits</label>
    <input name="snippets[{{index}}][credits]" class="form-control" type="text" value="{{credits}}" placeholder="No credits" />
  </div>

  <div class="form-group">
    <label class="control-label" for="snippet-img-text-{{index}}">Text</label>
    <textarea id="snippet-img-text-{{index}}" name="snippets[{{index}}][text]" class="form-control">{{text}}</textarea>
  </div>

  <button type="button" class="js-Remove btn btn-danger pull-right">Delete</button>

</fieldset>

<script>
  $('#snippet-img-text-{{index}}').summernote({
    toolbar: [
      // [groupName, [list of button]]
      ['style', ['bold', 'italic', 'underline', 'clear']],
      ['font', ['strikethrough', 'superscript', 'subscript']],
      ['fontsize', ['fontsize']],
      ['color', ['color']],
      ['para', ['style', 'ul', 'ol', 'paragraph']],
      ['height', ['height']],
      ['tools', ['link', 'hr', 'codeview', 'undo', 'redo']]
    ]
  });

(function() {
    const preview = document.getElementById('snippets-{{index}}-src-preview');

    [preview].forEach((media) => {
        const file = media.dataset.src;
        if (/^uploads\//.test(file)) {
            media.src = `/${file}`;
        } else {
            media.src = file;
        }
    });
})();
</script>
